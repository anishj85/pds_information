pds_information
===============

India Hackathon project: Bengal PDS project

India Hackathon: 
Public Distribution System in West Bengal

The plan is to develop an engine that can take an user input and produce an output that provides information on the entitlement in the area of interest to the user.
Here are the main components of the engine:
1)	DataStore
2)	Script to map the input and produce the output in a form understandable by a IVR platform.
3)	JSON Configuration Template for output
1) DataStore
The following tables are needed in the datastore:
Pds_phonebook:
This contains the mapping from a user to the block number whose entitlements he is interested in.
Primary key (Mobile).
Foreign Key(Block_Number)
First_Name	Last_Name	Mobile	Block_Number

Pds_record_set:
This contains the mapping for a block to its list of entitlements for a particular month.
Primary key (block_number, allocation_month, item_id)
Foreign key(Item_id)
pds_record_set: (Block_Number, Allocation_month, Item_id, Item_quantity)

Pds_item_info:
Primary key(Item_id)
pds_item_info: (Item_id, Item_name, Item_unit)

2) Script
A PHP script is written to take the user’s mobile phone number as input and produce an output containing the entitlement in his block.
Software Flow:
1) Query the user’s mobile phone number in the pds_phonebook table and fetch the block_number that the mobile is registered for.
2) Query the pds_record_set table to fetch information about all items that are to be distributed for the current month.
3) Also fetch the item names and the item_unit from the pds_item_info for all items returned in the query from step (2).
4) Use the JSON template and generate the message to be displayed/played out to the user. For the items field, we have to print out the name, quantity and quantity_unit for every item that was returned as part of the query in step (2).

3) JSON Configuration Template 
The following configuration template is used for generating the output
{
 "default": "For block $block and the month of $month, $itemsMsg",
 "1": {
    "10012013": {
		"language": "EN",
		"override msg": "This month we don't have any supplies"
	}
  },
 "2": {},
 "3": {},
 "4": {},
 "5": {}
}
The $itemsMsg will be generated by the PHP script for every item as follows and add it to the configuration in the template above:
“ Quantity of $item_name is $item_quantity $item_unit ”

In the above template, a configuration can be created for every block for every month can be added if that level of specification is required. It is shown in the template above by creating a configuration specific to block 1 for month of October.
The script will check if a configuration is specified for the block and month we are interested in. If yes, it will pick up that configuration and generate the output. If configuration is specified only for the block, then it will pick that. If no configuration is specified for the block at all, then the default specification is used.

